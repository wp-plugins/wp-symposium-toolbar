Customizations of the Toolbar using WP Symposium Toolbar


* Hooks

Prerequisites: you need to understand how WordPress hooks work, know how to add code to your theme's functions.php, and have some PHP knowledge.
Several hooks are available, mostly around the User Menu ("My Account"). Use $current_user to get the user ID, etc.


'symposium_toolbar_custom_display_name'
Sends the small HTML bit that contains the display name in the User Menu, that you may replace with the information you want.
Use Case: put the first name instead of the whole display name, or any information you'd like
Example:

function symposium_toolbar_custom_display_name_hook ( $user_info ) {
	
	global $current_user;
	
	get_currentuserinfo();
	return str_replace($current_user->display_name, $current_user->user_firstname, $user_info);
}
add_filter ( 'symposium_toolbar_custom_display_name', 'symposium_toolbar_custom_display_name_hook', 10, 1 );


'symposium_toolbar_custom_user_info'
Sends the whole user info (minus the avatar, in WP terminology) to which anything else can be added.
Use Case: add the role under certain conditions only, like for given accounts, given roles, etc.
Example: note that I'm lazy here and use the username class to style it by default, eventually refined by the class wpst-role. You may of course put your own class directly.

function symposium_toolbar_custom_user_info_hook ( $user_info_collected ) {
	
	global $current_user, $wp_roles;
	
	get_currentuserinfo();
	$role = array_shift($current_user->roles);
	
	if ( $role == 'administrator')
		return $user_info_collected . "<span class='username wpst-role'>".$wp_roles->role_names[$role]."</span>";
	else
		return $user_info_collected;
}
add_filter ( 'symposium_toolbar_custom_user_info', 'symposium_toolbar_custom_user_info_hook', 10, 1 );


'symposium_toolbar_add_user_action'
Add anything else to the User Info, that requires a dedicated link and/or a specific styling
Use Case: add a membership level, or a rank, with a link that points to a page where details may be given
Example: will add a title along with a URL linking to the site main page

function symposium_toolbar_add_user_action_hook ( $user_id ) {
	
	$added_info['title'] = "A Title for User ID #".$user_id;
	$added_info['url'] = site_url();
	
	return $added_info;
}
add_filter ( 'symposium_toolbar_add_user_action', 'symposium_toolbar_add_user_action_hook', 10, 1 );


'symposium_toolbar_my_account_url_update'
Modify the URL over the Howdy message and the small avatar

'symposium_toolbar_user_info_url_update'
Modify the URL over the user info in the User Menu

Use Cases: These two links point to the profile URL given by WordPress, and the site URL for visitors. Note that the WP Profile has a hook as well 'edit_profile_url' to modify the link from anywhere in your site. These two hooks allow you to have different links in the WP User Menu.


* CSS styling

Prerequisites: you need to know how to add custom CSS on your site, and obviously have some CSS knowledge.
Several classes are available
TODO

wpst-role wpst-role-<role>


* References

Description of API changes introduced with the WP Toolbar by Andrew Nacin
http://make.wordpress.org/core/2011/12/07/admin-bar-api-changes-in-3-3/

Codex description of the WP Toolbar class functions
- Add_node http://codex.wordpress.org/Function_Reference/add_node
- Remove_node http://codex.wordpress.org/Function_Reference/remove_node

How to customize the Toolbar (formerly Admin Bar) by Ipstenu
http://halfelf.org/2011/customize-wp-admin-bar/

In addition, a description of WP NavMenus by Justin Tadlock
http://justintadlock.com/archives/2010/06/01/goodbye-headaches-hello-menus
